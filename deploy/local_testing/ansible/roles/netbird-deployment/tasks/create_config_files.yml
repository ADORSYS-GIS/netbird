---
- name: Create NetBird management configuration
  template:
    src: management.json.j2
    dest: "{{ netbird_base_dir }}/management.json"
    owner: "{{ ansible_user }}"
    group: "{{ ansible_user }}"
    mode: '0644'
    backup: yes
  become: yes

- name: Create TURN server configuration
  template:
    src: turnserver.conf.j2
    dest: "{{ netbird_base_dir }}/turnserver.conf"
    owner: "{{ ansible_user }}"
    group: "{{ ansible_user }}"
    mode: '0644'
    backup: yes
  become: yes

- name: Display configuration files status
  debug:
    msg:
      - "✅ Configuration files created"
      - "📁 Management config: {{ netbird_base_dir }}/management.json"
      - "📁 TURN config: {{ netbird_base_dir }}/turnserver.conf"
