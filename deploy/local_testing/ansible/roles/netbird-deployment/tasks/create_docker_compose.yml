---
- name: Create Docker Compose file from template
  template:
    src: docker-compose.yml.j2
    dest: "{{ netbird_base_dir }}/docker-compose.yml"
    owner: "{{ ansible_user }}"
    group: "{{ ansible_user }}"
    mode: '0644'
    backup: yes
  become: yes

- name: Create database initialization script
  template:
    src: init-databases.sh.j2
    dest: "{{ netbird_base_dir }}/init-databases.sh"
    owner: "{{ ansible_user }}"
    group: "{{ ansible_user }}"
    mode: '0755'
  become: yes

- name: Display Docker Compose creation status
  debug:
    msg:
      - "✅ Docker Compose configuration created"
      - "📁 File: {{ netbird_base_dir }}/docker-compose.yml"
      - "📁 Database init: {{ netbird_base_dir }}/init-databases.sh"
