---
# Keycloak role handlers
# Note: Docker handlers only used in DEPLOY mode

# ========================================
# DEPLOY MODE Handlers
# ========================================
# These require community.docker collection

- name: Restart Keycloak
  community.docker.docker_compose_v2:
    project_src: "{{ keycloak_data_dir }}"
    state: restarted
  when: keycloak_deploy_mode | default(false)

- name: Stop Keycloak
  community.docker.docker_compose_v2:
    project_src: "{{ keycloak_data_dir }}"
    state: stopped
  when: keycloak_deploy_mode | default(false)

- name: Reload Keycloak configuration
  community.docker.docker_compose_v2:
    project_src: "{{ keycloak_data_dir }}"
    state: restarted
    services:
      - keycloak
  when: keycloak_deploy_mode | default(false)

- name: Reload Caddy
  community.docker.docker_compose_v2:
    project_src: "{{ keycloak_data_dir }}"
    state: restarted
    services:
      - caddy
  when: keycloak_deploy_mode | default(false)

# ========================================
# EXTERNAL MODE Handlers
# ========================================
# No handlers needed for external mode
# Configuration changes are applied immediately via API
