---
- name: Create initial password summary file
  template:
    src: initial-passwords.txt.j2
    dest: "{{ netbird_config_dir }}/PASSWORDS-GENERATED.txt"
    owner: "{{ ansible_user }}"
    group: "{{ ansible_user }}"
    mode: '0600'
    backup: yes
  become: yes

- name: Display password generation summary
  debug:
    msg:
      - "âœ… Initial passwords generated and saved"
      - "ğŸ“ Password file: {{ netbird_config_dir }}/PASSWORDS-GENERATED.txt"
      - "ğŸ” Keycloak admin: {{ keycloak_admin_password[:8] }}..."
      - "ğŸ—„ï¸ PostgreSQL: {{ postgres_password[:8] }}..."
      - "âš ï¸ Keep these passwords secure!"
